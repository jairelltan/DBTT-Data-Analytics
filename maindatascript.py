from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.chrome.options import Options
import time
from datetime import datetime, timedelta
from getallmovietimings import obtain_all_movietimings

#actual calling of the script. call when necessary.
movie_timings = obtain_all_movietimings()

#testing now so i dont want to keep calling the website. Uncomment if needed
#update as of 9:42pm, all movies are over le
# movie_timings = [{'location': 'JEM', 'movie_name': 'Close-Ur-Kopitiam-PG13', 'timing': '2025-03-05T15:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201557', 'genre': 'Drama, Comedy', 'language': 'Mandarin', 'rating': 'PG13, Some Sexual References', 'runtime': '106 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T15:20:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5792', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Last-Breath-PG13', 'timing': '2025-03-05T15:20:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5797', 'genre': 'Drama', 'language': 'English with no subtitles', 'rating': 'PG13, Brief Coarse Language', 'runtime': '93 mins', 'opening': '27 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T15:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13097', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Officer-On-Duty-Malayalam-M18', 'timing': '2025-03-05T15:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154489', 'genre': 'Thriller', 'language': 'Malayalam', 'rating': 'M18, Drug Use', 'runtime': '136 mins', 'opening': '27 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T15:40:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13112', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Downtown East', 'movie_name': 'Officer-On-Duty-Malayalam-M18', 'timing': '2025-03-05T15:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117934', 'genre': 'Thriller', 'language': 'Malayalam', 'rating': 'M18, Drug Use', 'runtime': '136 mins', 'opening': '27 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T15:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201577', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Close-Ur-Kopitiam-PG13', 'timing': '2025-03-05T16:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5801', 'genre': 'Drama, Comedy', 'language': 'Mandarin', 'rating': 'PG13, Some Sexual References', 'runtime': '106 mins', 'opening': '27 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T16:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13109', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T16:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201513', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Detective-Chinatown-1900-NC16', 'timing': '2025-03-05T16:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5776', 'genre': 'Comedy', 'language': 'Mandarin', 'rating': 'NC16, Some Violence and Coarse Language', 'runtime': '137 mins', 'opening': '29 Jan 2025'}, {'location': 'Causeway Point', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T16:05:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154470', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T16:05:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5782', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Downtown East', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T16:05:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117889', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Detective-Chinatown-1900-NC16', 'timing': '2025-03-05T16:05:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154494', 'genre': 'Comedy', 'language': 'Mandarin', 'rating': 'NC16, Some Violence and Coarse Language', 'runtime': '137 mins', 'opening': '29 Jan 2025'}, {'location': 'Downtown East', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T16:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117882', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T16:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5785', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Last-Breath-PG13', 'timing': '2025-03-05T16:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201570', 'genre': 'Drama', 'language': 'English with no subtitles', 'rating': 'PG13, Brief Coarse Language', 'runtime': '93 mins', 'opening': '27 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Detective-Chinatown-1900-NC16', 'timing': '2025-03-05T16:40:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201565', 'genre': 'Comedy', 'language': 'Mandarin', 'rating': 'NC16, Some Violence and Coarse Language', 'runtime': '137 mins', 'opening': '29 Jan 2025'}, {'location': 'Clementi 321', 'movie_name': 'Nosferatu-M18', 'timing': '2025-03-05T16:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5773', 'genre': 'Horror, Mystery', 'language': 'English', 'rating': 'M18, Nudity and Sexual Scene', 'runtime': '132 mins', 'opening': '27 Feb 2025'}, {'location': 'Downtown East', 'movie_name': 'Detective-Chinatown-1900-NC16', 'timing': '2025-03-05T16:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117947', 'genre': 'Comedy', 'language': 'Mandarin', 'rating': 'NC16, Some Violence and Coarse Language', 'runtime': '137 mins', 'opening': '29 Jan 2025'}, {'location': 'Downtown East', 'movie_name': 'Number-2-NC16', 'timing': '2025-03-05T16:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117876', 'genre': 'Comedy, Drama', 'language': 'Mandarin', 'rating': 'NC16, Mature Theme', 'runtime': '95 mins', 'opening': '28 Jan 2025'}, {'location': 'Downtown East', 'movie_name': 'Nosferatu-M18', 'timing': '2025-03-05T17:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117879', 'genre': 'Horror, Mystery', 'language': 'English', 'rating': 'M18, Nudity and Sexual Scene', 'runtime': '132 mins', 'opening': '27 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Close-Ur-Kopitiam-PG13', 'timing': '2025-03-05T17:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13302', 'genre': 'Drama, Comedy', 'language': 'Mandarin', 'rating': 'PG13, Some Sexual References', 'runtime': '106 mins', 'opening': '27 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Officer-On-Duty-Malayalam-M18', 'timing': '2025-03-05T17:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201574', 'genre': 'Thriller', 'language': 'Malayalam', 'rating': 'M18, Drug Use', 'runtime': '136 mins', 'opening': '27 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T17:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201562', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Dark-Nuns-NC16', 'timing': '2025-03-05T17:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5779', 'genre': 'Horror, Thriller', 'language': 'Korean', 'rating': 'NC16, Horror', 'runtime': '115 mins', 'opening': '13 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Creation-of-the-Gods-II-Demon-Force-PG13', 'timing': '2025-03-05T17:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13106', 'genre': 'Fantasy, Action, War', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '145 mins', 'opening': '29 Jan 2025'}, {'location': 'Causeway Point', 'movie_name': 'Creation-of-the-Gods-II-Demon-Force-PG13', 'timing': '2025-03-05T17:10:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/153992', 'genre': 'Fantasy, Action, War', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '145 mins', 'opening': '29 Jan 2025'}, {'location': 'JEM', 'movie_name': 'Nosferatu-M18', 'timing': '2025-03-05T17:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201515', 'genre': 'Horror, Mystery', 'language': 'English', 'rating': 'M18, Nudity and Sexual Scene', 'runtime': '132 mins', 'opening': '27 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T17:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13094', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T17:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201550', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T17:20:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5793', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Dark-Nuns-NC16', 'timing': '2025-03-05T17:20:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201554', 'genre': 'Horror, Thriller', 'language': 'Korean', 'rating': 'NC16, Horror', 'runtime': '115 mins', 'opening': '13 Feb 2025'}, {'location': 'Century Square', 'movie_name': '1-Imam-2-Makmum-PG', 'timing': '2025-03-05T17:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13098', 'genre': 'Drama, Romance', 'language': 'Indonesian', 'rating': 'PG, Some Sexual References', 'runtime': '112 mins', 'opening': '27 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Aghathiyaa-Tamil-PG13', 'timing': '2025-03-05T17:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154476', 'genre': 'Horror, Thriller', 'language': 'Tamil', 'rating': 'PG13, Some Violence and Horror', 'runtime': '134 mins', 'opening': '28 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Nosferatu-M18', 'timing': '2025-03-05T17:40:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5806', 'genre': 'Horror, Mystery', 'language': 'English', 'rating': 'M18, Nudity and Sexual Scene', 'runtime': '132 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Nilavuku-En-Mel-Ennadi-Kobam-Tamil-PG13', 'timing': '2025-03-05T17:40:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5798', 'genre': 'Comedy, Drama, Romance', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '130 mins', 'opening': '21 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Nocturnal-NC16', 'timing': '2025-03-05T17:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201558', 'genre': 'Thriller, Crime', 'language': 'Korean', 'rating': 'NC16, Some Nudity and Violence', 'runtime': '100 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Anak-Kunti-NC16', 'timing': '2025-03-05T17:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5789', 'genre': 'Horror', 'language': 'Indonesian', 'rating': 'NC16, Violence and Gore', 'runtime': '95 mins', 'opening': '20 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T18:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/153996', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Close-Ur-Kopitiam-PG13', 'timing': '2025-03-05T18:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154087', 'genre': 'Drama, Comedy', 'language': 'Mandarin', 'rating': 'PG13, Some Sexual References', 'runtime': '106 mins', 'opening': '27 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T18:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154490', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Close-Ur-Kopitiam-PG13', 'timing': '2025-03-05T18:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5802', 'genre': 'Drama, Comedy', 'language': 'Mandarin', 'rating': 'PG13, Some Sexual References', 'runtime': '106 mins', 'opening': '27 Feb 2025'}, {'location': 'Downtown East', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T18:40:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117887', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T18:40:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201571', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T19:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13113', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T19:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201578', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T19:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13110', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T19:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201514', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T19:20:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5794', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T19:20:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154495', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Downtown East', 'movie_name': 'Officer-On-Duty-Malayalam-M18', 'timing': '2025-03-05T19:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117949', 'genre': 'Thriller', 'language': 'Malayalam', 'rating': 'M18, Drug Use', 'runtime': '136 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T19:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5783', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Detective-Chinatown-1900-NC16', 'timing': '2025-03-05T19:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5777', 'genre': 'Comedy', 'language': 'Mandarin', 'rating': 'NC16, Some Violence and Coarse Language', 'runtime': '137 mins', 'opening': '29 Jan 2025'}, {'location': 'Causeway Point', 'movie_name': 'Officer-On-Duty-Malayalam-M18', 'timing': '2025-03-05T19:40:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154471', 'genre': 'Thriller', 'language': 'Malayalam', 'rating': 'M18, Drug Use', 'runtime': '136 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Nosferatu-M18', 'timing': '2025-03-05T19:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5774', 'genre': 'Horror, Mystery', 'language': 'English', 'rating': 'M18, Nudity and Sexual Scene', 'runtime': '132 mins', 'opening': '27 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T19:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13103', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T19:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5786', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'Downtown East', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T19:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117890', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T19:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201962', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'Downtown East', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T20:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117883', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T20:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201575', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'Downtown East', 'movie_name': 'Sabdham-Tamil-PG13', 'timing': '2025-03-05T20:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117960', 'genre': 'Horror, Thriller', 'language': 'Tamil', 'rating': 'PG13, Horror and Some Violence', 'runtime': '146 mins', 'opening': '28 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Aghathiyaa-Tamil-PG13', 'timing': '2025-03-05T20:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13099', 'genre': 'Horror, Thriller', 'language': 'Tamil', 'rating': 'PG13, Some Violence and Horror', 'runtime': '134 mins', 'opening': '28 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Aghathiyaa-Tamil-PG13', 'timing': '2025-03-05T20:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5790', 'genre': 'Horror, Thriller', 'language': 'Tamil', 'rating': 'PG13, Some Violence and Horror', 'runtime': '134 mins', 'opening': '28 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Creation-of-the-Gods-II-Demon-Force-PG13', 'timing': '2025-03-05T20:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5780', 'genre': 'Fantasy, Action, War', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '145 mins', 'opening': '29 Jan 2025'}, {'location': 'JEM', 'movie_name': 'Creation-of-the-Gods-II-Demon-Force-PG13', 'timing': '2025-03-05T20:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201960', 'genre': 'Fantasy, Action, War', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '145 mins', 'opening': '29 Jan 2025'}, {'location': 'JEM', 'movie_name': 'Officer-On-Duty-Malayalam-M18', 'timing': '2025-03-05T20:10:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201563', 'genre': 'Thriller', 'language': 'Malayalam', 'rating': 'M18, Drug Use', 'runtime': '136 mins', 'opening': '27 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Close-Ur-Kopitiam-PG13', 'timing': '2025-03-05T20:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13107', 'genre': 'Drama, Comedy', 'language': 'Mandarin', 'rating': 'PG13, Some Sexual References', 'runtime': '106 mins', 'opening': '27 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Close-Ur-Kopitiam-PG13', 'timing': '2025-03-05T20:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201559', 'genre': 'Drama, Comedy', 'language': 'Mandarin', 'rating': 'PG13, Some Sexual References', 'runtime': '106 mins', 'opening': '27 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Dragon-Tamil-PG13', 'timing': '2025-03-05T20:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/153993', 'genre': 'Comedy', 'language': 'Tamil', 'rating': 'PG13, Some Coarse Language', 'runtime': '154 mins', 'opening': '21 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Legends-of-the-Condor-Heroes-The-Gallants-PG13', 'timing': '2025-03-05T20:15:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201516', 'genre': 'Action, Fantasy, Drama', 'language': 'Mandarin', 'rating': 'PG13, Some Violence', 'runtime': '146 mins', 'opening': '20 Feb 2025'}, {'location': 'Downtown East', 'movie_name': 'Nosferatu-M18', 'timing': '2025-03-05T20:20:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117880', 'genre': 'Horror, Mystery', 'language': 'English', 'rating': 'M18, Nudity and Sexual Scene', 'runtime': '132 mins', 'opening': '27 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Nosferatu-M18', 'timing': '2025-03-05T20:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154477', 'genre': 'Horror, Mystery', 'language': 'English', 'rating': 'M18, Nudity and Sexual Scene', 'runtime': '132 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Nosferatu-M18', 'timing': '2025-03-05T20:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5807', 'genre': 'Horror, Mystery', 'language': 'English', 'rating': 'M18, Nudity and Sexual Scene', 'runtime': '132 mins', 'opening': '27 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Nosferatu-M18', 'timing': '2025-03-05T20:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201551', 'genre': 'Horror, Mystery', 'language': 'English', 'rating': 'M18, Nudity and Sexual Scene', 'runtime': '132 mins', 'opening': '27 Feb 2025'}, {'location': 'Century Square', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T20:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1113/13095', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': '1-Imam-2-Makmum-PG', 'timing': '2025-03-05T20:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5833', 'genre': 'Drama, Romance', 'language': 'Indonesian', 'rating': 'PG, Some Sexual References', 'runtime': '112 mins', 'opening': '27 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Officer-On-Duty-Malayalam-M18', 'timing': '2025-03-05T20:30:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154491', 'genre': 'Thriller', 'language': 'Malayalam', 'rating': 'M18, Drug Use', 'runtime': '136 mins', 'opening': '27 Feb 2025'}, {'location': 'JEM', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T20:40:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1110/201572', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}, {'location': 'Downtown East', 'movie_name': '1-Imam-2-Makmum-PG', 'timing': '2025-03-05T20:40:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1106/117886', 'genre': 'Drama, Romance', 'language': 'Indonesian', 'rating': 'PG, Some Sexual References', 'runtime': '112 mins', 'opening': '27 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': '1-Imam-2-Makmum-PG', 'timing': '2025-03-05T20:45:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/154107', 'genre': 'Drama, Romance', 'language': 'Indonesian', 'rating': 'PG, Some Sexual References', 'runtime': '112 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Close-Ur-Kopitiam-PG13', 'timing': '2025-03-05T21:00:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5803', 'genre': 'Drama, Comedy', 'language': 'Mandarin', 'rating': 'PG13, Some Sexual References', 'runtime': '106 mins', 'opening': '27 Feb 2025'}, {'location': 'Causeway Point', 'movie_name': 'Nocturnal-NC16', 'timing': '2025-03-05T21:10:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1102/153997', 'genre': 'Thriller, Crime', 'language': 'Korean', 'rating': 'NC16, Some Nudity and Violence', 'runtime': '100 mins', 'opening': '27 Feb 2025'}, {'location': 'Clementi 321', 'movie_name': 'Mobile-Suit-Gundam-GQuuuuuuX--Beginning-PG13', 'timing': '2025-03-05T21:36:00', 'href': 'https://www.cathaycineplexes.com.sg/ticketing/1114/5795', 'genre': 'Anime, Action, Sci-Fi', 'language': 'Japanese', 'rating': 'PG13, Brief Nudity and Battle Scenes', 'runtime': '82 mins', 'opening': '27 Feb 2025'}]

from datetime import datetime, timedelta

#this functions checks every 30 seconds if there is a movie screening in the next 5mins/before 5 mins. It cannot be an exact time because it means that the user needs to activate the script exactly at 00 seconds + any delays to the opening of the website can prevent the checks from happening at exactly 00 seconds. I think this is a fair trade.
def check_and_open_movie_timing():
    now = datetime.now()
    for movie in movie_timings:
        movie_timing = datetime.fromisoformat(movie['timing'])
        if abs((movie_timing - now).total_seconds()) <= 300:  
            print(f"Movie '{movie['movie_name']}' at {movie['timing']} is showing now. Opening the movie link...")
            #delete the movie from the original array. (Prevents duplicate entries)
            movie_timings.remove(movie) 
            return movie
    print('no movie as of'+ str(now))
    return None

def get_details():
    now = datetime.now()
    end_of_day = datetime(now.year, now.month, now.day, 23, 59, 59)
    while True:
        # script ends ends at 12am
        if datetime.now() >= end_of_day:
            print("End of the day reached. Stopping the script.")
            break
        movie = check_and_open_movie_timing()
    
        # if a movie is found in the time interval, open it and count the stuff. you can get the other non seat data by calling movie['location'] etc.
        if movie:
            cService = webdriver.ChromeService(executable_path=r'C:\Users\jai\Desktop\DBTT\DBTT\chromedriver-win64\chromedriver-win64\chromedriver.exe')
            driver = webdriver.Chrome(service=cService)

            driver.get(movie['href'])

            seats = driver.find_elements(By.CLASS_NAME, 'cell')

            occupied_regular_count = 0
            not_occupied_regular_count = 0

            occupied_couple_count = 0
            not_occupied_couple_count = 0

            occupied_wheelchair_count = 0
            not_occupied_wheelchair_count = 0

            occupied_wave_count = 0
            not_occupied_wave_count = 0

            occupied_total_count = 0
            not_occupied_total_count = 0

            # URLs for different seat types. I found out this is the easiest way to find all the seats (the status method doesnt work)
            regular_seat_url = "https://www.cathaycineplexes.com.sg/images/single-seat.png"
            regular_seat_sold_url = "https://www.cathaycineplexes.com.sg/images/single-seat-sold.png"

            couple_left_url = "https://www.cathaycineplexes.com.sg/images/couple-left.png"
            couple_right_url = "https://www.cathaycineplexes.com.sg/images/couple-right.png"
            couple_left_sold_url = "https://www.cathaycineplexes.com.sg/images/couple-left-sold.png"
            couple_right_sold_url = "https://www.cathaycineplexes.com.sg/images/couple-right-sold.png"

            wheelchair_url = "https://www.cathaycineplexes.com.sg/images/wheelchair.png"
            wheelchair_sold_url = "https://www.cathaycineplexes.com.sg/images/wheelchair-sold.png"

            #niche ones
            wave_left_url = "https://www.cathaycineplexes.com.sg/images/w-left.png"
            wave_right_url = "https://www.cathaycineplexes.com.sg/images/w-right.png"
            wave_left_sold_url = "https://www.cathaycineplexes.com.sg/images/w-left-sold.png"
            wave_right_sold_url = "https://www.cathaycineplexes.com.sg/images/w-right-sold.png"


            for seat in seats:
                style = seat.get_attribute('style')  
                # status = seat.get_attribute('status')  
                
                # Check the background image URL and status for each seat type
                if regular_seat_url in style:
                    not_occupied_regular_count += 1
                    not_occupied_total_count += 1
                elif regular_seat_sold_url in style:
                    occupied_regular_count += 1
                    occupied_total_count += 1

                elif couple_left_url in style or couple_right_url in style:
                    not_occupied_couple_count += 1
                    not_occupied_total_count += 1
                elif couple_left_sold_url in style or couple_right_sold_url in style:
                    occupied_couple_count += 1
                    occupied_total_count += 1

                elif wheelchair_url in style:
                    not_occupied_wheelchair_count += 1
                    not_occupied_total_count += 1
                elif wheelchair_sold_url in style:
                    occupied_wheelchair_count += 1
                    occupied_total_count += 1

                #Niche Ones
                elif wave_right_url in style or wave_left_url in style:
                    not_occupied_wave_count += 1
                    not_occupied_total_count += 1
                elif wave_left_sold_url in style or wave_right_sold_url in style:
                    occupied_wave_count += 1
                    occupied_total_count += 1



            print(f'Occupied regular seats: {occupied_regular_count}')
            print(f'Not occupied regular seats: {not_occupied_regular_count}')
            print(f'Occupied couple seats: {occupied_couple_count}')
            print(f'Not occupied couple seats: {not_occupied_couple_count}')
            print(f'Occupied wheelchair seats: {occupied_wheelchair_count}')
            print(f'Not occupied wheelchair seats: {not_occupied_wheelchair_count}')
            print(f'Occupied wave seats: {occupied_wave_count}')
            print(f'Not occupied wave seats: {not_occupied_wave_count}')


            print(f'Total occupied seats: {occupied_total_count}')
            print(f'Total not occupied seats: {not_occupied_total_count}')

            #Close the browser window
            driver.quit()

        #check every 30 seconds
        time.sleep(30)

get_details()